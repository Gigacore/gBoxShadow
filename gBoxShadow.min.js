!function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function a(t){Y=t}function i(t){X=t}function o(){return function(){process.nextTick(u)}}function r(){return function(){B(u)}}function s(){var t=0,e=new V(u),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function c(){var t=new MessageChannel;return t.port1.onmessage=u,function(){t.port2.postMessage(0)}}function l(){return function(){setTimeout(u,1)}}function u(){for(var t=0;P>t;t+=2){var e=W[t],n=W[t+1];e(n),W[t]=void 0,W[t+1]=void 0}P=0}function h(){try{var t=require,e=t("vertx");return B=e.runOnLoop||e.runOnContext,r()}catch(n){return l()}}function f(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function d(t){try{return t.then}catch(e){return et.error=e,et}}function v(t,e,n,a){try{t.call(e,n,a)}catch(i){return i}}function y(t,e,n){X(function(t){var a=!1,i=v(n,e,function(n){a||(a=!0,e!==n?b(t,n):x(t,n))},function(e){a||(a=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!a&&i&&(a=!0,w(t,i))},t)}function A(t,e){e._state===J?x(t,e._result):e._state===tt?w(t,e._result):M(e,void 0,function(e){b(t,e)},function(e){w(t,e)})}function g(t,n){if(n.constructor===t.constructor)A(t,n);else{var a=d(n);a===et?w(t,et.error):void 0===a?x(t,n):e(a)?y(t,n,a):x(t,n)}}function b(e,n){e===n?w(e,m()):t(n)?g(e,n):x(e,n)}function _(t){t._onerror&&t._onerror(t._result),E(t)}function x(t,e){t._state===K&&(t._result=e,t._state=J,0!==t._subscribers.length&&X(E,t))}function w(t,e){t._state===K&&(t._state=tt,t._result=e,X(_,t))}function M(t,e,n,a){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+J]=n,i[o+tt]=a,0===o&&t._state&&X(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var a,i,o=t._result,r=0;r<e.length;r+=3)a=e[r],i=e[r+n],a?T(n,a,i,o):i(o);t._subscribers.length=0}}function R(){this.error=null}function I(t,e){try{return t(e)}catch(n){return nt.error=n,nt}}function T(t,n,a,i){var o,r,s,c,l=e(a);if(l){if(o=I(a,i),o===nt?(c=!0,r=o.error,o=null):s=!0,n===o)return void w(n,p())}else o=i,s=!0;n._state!==K||(l&&s?b(n,o):c?w(n,r):t===J?x(n,o):t===tt&&w(n,o))}function O(t,e){try{e(function(e){b(t,e)},function(e){w(t,e)})}catch(n){w(t,n)}}function L(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(f),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?x(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&x(n.promise,n._result))):w(n.promise,n._validationError())}function z(t){return new at(this,t).promise}function G(t){function e(t){b(i,t)}function n(t){w(i,t)}var a=this,i=new a(f);if(!Z(t))return w(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,r=0;i._state===K&&o>r;r++)M(a.resolve(t[r]),void 0,e,n);return i}function C(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(f);return b(n,t),n}function N(t){var e=this,n=new e(f);return w(n,t),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(t){this._id=ct++,this._state=void 0,this._result=void 0,this._subscribers=[],f!==t&&(e(t)||F(),this instanceof j||D(),O(this,t))}function S(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;(!n||"[object Promise]"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=lt)}var k;k=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B,Y,Q,Z=k,P=0,X=({}.toString,function(t,e){W[P]=t,W[P+1]=e,P+=2,2===P&&(Y?Y(u):Q())}),U="undefined"!=typeof window?window:void 0,q=U||{},V=q.MutationObserver||q.WebKitMutationObserver,$="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),H="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,W=new Array(1e3);Q=$?o():V?s():H?c():void 0===U&&"function"==typeof require?h():l();var K=void 0,J=1,tt=2,et=new R,nt=new R;L.prototype._validateInput=function(t){return Z(t)},L.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},L.prototype._init=function(){this._result=new Array(this.length)};var at=L;L.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,a=t._input,i=0;n._state===K&&e>i;i++)t._eachEntry(a[i],i)},L.prototype._eachEntry=function(t,e){var a=this,i=a._instanceConstructor;n(t)?t.constructor===i&&t._state!==K?(t._onerror=null,a._settledAt(t._state,e,t._result)):a._willSettleAt(i.resolve(t),e):(a._remaining--,a._result[e]=t)},L.prototype._settledAt=function(t,e,n){var a=this,i=a.promise;i._state===K&&(a._remaining--,t===tt?w(i,n):a._result[e]=n),0===a._remaining&&x(i,a._result)},L.prototype._willSettleAt=function(t,e){var n=this;M(t,void 0,function(t){n._settledAt(J,e,t)},function(t){n._settledAt(tt,e,t)})};var it=z,ot=G,rt=C,st=N,ct=0,lt=j;j.all=it,j.race=ot,j.resolve=rt,j.reject=st,j._setScheduler=a,j._setAsap=i,j._asap=X,j.prototype={constructor:j,then:function(t,e){var n=this,a=n._state;if(a===J&&!t||a===tt&&!e)return this;var i=new this.constructor(f),o=n._result;if(a){var r=arguments[a-1];X(function(){T(a,i,r,o)})}else M(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var ut=S,ht={Promise:lt,polyfill:ut};"function"==typeof define&&define.amd?define(function(){return ht}):"undefined"!=typeof module&&module.exports?module.exports=ht:"undefined"!=typeof this&&(this.ES6Promise=ht),ut()}).call(this),!function(t){function e(t){return t=+t,0===t||isNaN(t)?t:t>0?1:-1}function n(t){var e=new Promise(function(e,n){var a=function(i){setTimeout(function(){t&&t.data?e():i>=20?n():a(++i)},50)};a(0)});return e}function a(){p=m?(t.screen.orientation.angle||0)*l:(t.orientation||0)*l}function i(t){h.orientation.data=t;for(var e in h.orientation.callbacks)h.orientation.callbacks[e].call(this)}function o(t){h.motion.data=t;for(var e in h.motion.callbacks)h.motion.callbacks[e].call(this)}if(void 0===t.FULLTILT||null===t.FULLTILT){var r=Math.PI,s=r/2,c=2*r,l=r/180,u=180/r,h={orientation:{active:!1,callbacks:[],data:void 0},motion:{active:!1,callbacks:[],data:void 0}},f=!1,m=t.screen&&t.screen.orientation&&void 0!==t.screen.orientation.angle&&null!==t.screen.orientation.angle?!0:!1,p=(m?t.screen.orientation.angle:t.orientation||0)*l,d=s,v=r,y=c/3,A=-s,g={};g.version="0.5.3",g.getDeviceOrientation=function(t){var e=new Promise(function(e,a){var i=new g.DeviceOrientation(t);i.start();var o=new n(h.orientation);o.then(function(){i._alphaAvailable=h.orientation.data.alpha&&null!==h.orientation.data.alpha,i._betaAvailable=h.orientation.data.beta&&null!==h.orientation.data.beta,i._gammaAvailable=h.orientation.data.gamma&&null!==h.orientation.data.gamma,e(i)})["catch"](function(){i.stop(),a("DeviceOrientation is not supported")})});return e},g.getDeviceMotion=function(t){var e=new Promise(function(e,a){var i=new g.DeviceMotion(t);i.start();var o=new n(h.motion);o.then(function(){i._accelerationXAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.x,i._accelerationYAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.y,i._accelerationZAvailable=h.motion.data.acceleration&&h.motion.data.acceleration.z,i._accelerationIncludingGravityXAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.x,i._accelerationIncludingGravityYAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.y,i._accelerationIncludingGravityZAvailable=h.motion.data.accelerationIncludingGravity&&h.motion.data.accelerationIncludingGravity.z,i._rotationRateAlphaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.alpha,i._rotationRateBetaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.beta,i._rotationRateGammaAvailable=h.motion.data.rotationRate&&h.motion.data.rotationRate.gamma,e(i)})["catch"](function(){i.stop(),a("DeviceMotion is not supported")})});return e},g.Quaternion=function(t,n,a,i){var o;this.set=function(t,e,n,a){this.x=t||0,this.y=e||0,this.z=n||0,this.w=a||1},this.copy=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},this.setFromEuler=function(){var t,e,n,a,i,o,r,s,c,u,h,f;return function(m){return m=m||{},n=(m.alpha||0)*l,t=(m.beta||0)*l,e=(m.gamma||0)*l,o=n/2,a=t/2,i=e/2,r=Math.cos(a),s=Math.cos(i),c=Math.cos(o),u=Math.sin(a),h=Math.sin(i),f=Math.sin(o),this.set(u*s*c-r*h*f,r*h*c+u*s*f,r*s*f+u*h*c,r*s*c-u*h*f),this.normalize(),this}}(),this.setFromRotationMatrix=function(){var t;return function(n){return t=n.elements,this.set(.5*Math.sqrt(1+t[0]-t[4]-t[8])*e(t[7]-t[5]),.5*Math.sqrt(1-t[0]+t[4]-t[8])*e(t[2]-t[6]),.5*Math.sqrt(1-t[0]-t[4]+t[8])*e(t[3]-t[1]),.5*Math.sqrt(1+t[0]+t[4]+t[8])),this}}(),this.multiply=function(t){return o=g.Quaternion.prototype.multiplyQuaternions(this,t),this.copy(o),this},this.rotateX=function(t){return o=g.Quaternion.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(o),this},this.rotateY=function(t){return o=g.Quaternion.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(o),this},this.rotateZ=function(t){return o=g.Quaternion.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(o),this},this.normalize=function(){return g.Quaternion.prototype.normalize(this)},this.set(t,n,a,i)},g.Quaternion.prototype={constructor:g.Quaternion,multiplyQuaternions:function(){var t=new g.Quaternion;return function(e,n){var a=e.x,i=e.y,o=e.z,r=e.w,s=n.x,c=n.y,l=n.z,u=n.w;return t.set(a*u+r*s+i*l-o*c,i*u+r*c+o*s-a*l,o*u+r*l+a*c-i*s,r*u-a*s-i*c-o*l),t}}(),normalize:function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w);return 0===e?(t.x=0,t.y=0,t.z=0,t.w=1):(e=1/e,t.x*=e,t.y*=e,t.z*=e,t.w*=e),t},rotateByAxisAngle:function(){var t,e,n=new g.Quaternion,a=new g.Quaternion;return function(i,o,r){return t=(r||0)/2,e=Math.sin(t),a.set((o[0]||0)*e,(o[1]||0)*e,(o[2]||0)*e,Math.cos(t)),n=g.Quaternion.prototype.multiplyQuaternions(i,a),g.Quaternion.prototype.normalize(n)}}()},g.RotationMatrix=function(t,e,n,a,i,o,r,s,c){var u;this.elements=new Float32Array(9),this.identity=function(){return this.set(1,0,0,0,1,0,0,0,1),this},this.set=function(t,e,n,a,i,o,r,s,c){this.elements[0]=t||1,this.elements[1]=e||0,this.elements[2]=n||0,this.elements[3]=a||0,this.elements[4]=i||1,this.elements[5]=o||0,this.elements[6]=r||0,this.elements[7]=s||0,this.elements[8]=c||1},this.copy=function(t){this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8]},this.setFromEuler=function(){var t,e,n,a,i,o,r,s,c;return function(u){return u=u||{},n=(u.alpha||0)*l,t=(u.beta||0)*l,e=(u.gamma||0)*l,a=Math.cos(t),i=Math.cos(e),o=Math.cos(n),r=Math.sin(t),s=Math.sin(e),c=Math.sin(n),this.set(o*i-c*r*s,-a*c,i*c*r+o*s,i*c+o*r*s,o*a,c*s-o*i*r,-a*s,r,a*i),this.normalize(),this}}(),this.setFromQuaternion=function(){var t,e,n,a;return function(i){return t=i.w*i.w,e=i.x*i.x,n=i.y*i.y,a=i.z*i.z,this.set(t+e-n-a,2*(i.x*i.y-i.w*i.z),2*(i.x*i.z+i.w*i.y),2*(i.x*i.y+i.w*i.z),t-e+n-a,2*(i.y*i.z-i.w*i.x),2*(i.x*i.z-i.w*i.y),2*(i.y*i.z+i.w*i.x),t-e-n+a),this}}(),this.multiply=function(t){return u=g.RotationMatrix.prototype.multiplyMatrices(this,t),this.copy(u),this},this.rotateX=function(t){return u=g.RotationMatrix.prototype.rotateByAxisAngle(this,[1,0,0],t),this.copy(u),this},this.rotateY=function(t){return u=g.RotationMatrix.prototype.rotateByAxisAngle(this,[0,1,0],t),this.copy(u),this},this.rotateZ=function(t){return u=g.RotationMatrix.prototype.rotateByAxisAngle(this,[0,0,1],t),this.copy(u),this},this.normalize=function(){return g.RotationMatrix.prototype.normalize(this)},this.set(t,e,n,a,i,o,r,s,c)},g.RotationMatrix.prototype={constructor:g.RotationMatrix,multiplyMatrices:function(){var t,e,n=new g.RotationMatrix;return function(a,i){return t=a.elements,e=i.elements,n.set(t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]),n}}(),normalize:function(t){var e=t.elements,n=e[0]*e[4]*e[8]-e[0]*e[5]*e[7]-e[1]*e[3]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6];return e[0]/=n,e[1]/=n,e[2]/=n,e[3]/=n,e[4]/=n,e[5]/=n,e[6]/=n,e[7]/=n,e[8]/=n,t.elements=e,t},rotateByAxisAngle:function(){var t,e,n=new g.RotationMatrix,a=new g.RotationMatrix,i=!1;return function(o,r,s){return a.identity(),i=!1,t=Math.sin(s),e=Math.cos(s),1===r[0]&&0===r[1]&&0===r[2]?(i=!0,a.elements[4]=e,a.elements[5]=-t,a.elements[7]=t,a.elements[8]=e):1===r[1]&&0===r[0]&&0===r[2]?(i=!0,a.elements[0]=e,a.elements[2]=t,a.elements[6]=-t,a.elements[8]=e):1===r[2]&&0===r[0]&&0===r[1]&&(i=!0,a.elements[0]=e,a.elements[1]=-t,a.elements[3]=t,a.elements[4]=e),i?(n=g.RotationMatrix.prototype.multiplyMatrices(o,a),n=g.RotationMatrix.prototype.normalize(n)):n=o,n}}()},g.Euler=function(t,e,n){this.set=function(t,e,n){this.alpha=t||0,this.beta=e||0,this.gamma=n||0},this.copy=function(t){this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma},this.setFromRotationMatrix=function(){var t,e,n,a;return function(i){t=i.elements,t[8]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),a=Math.atan2(-t[6],t[8])):t[8]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-r:r,a=Math.atan2(t[6],-t[8])):t[6]>0?(e=Math.atan2(-t[1],t[4]),n=Math.asin(t[7]),a=-s):t[6]<0?(e=Math.atan2(t[1],-t[4]),n=-Math.asin(t[7]),n+=n>=0?-r:r,a=-s):(e=Math.atan2(t[3],t[0]),n=t[7]>0?s:-s,a=0),0>e&&(e+=c),e*=u,n*=u,a*=u,this.set(e,n,a)}}(),this.setFromQuaternion=function(){var t,e,n;return function(a){var i=a.w*a.w,o=a.x*a.x,l=a.y*a.y,h=a.z*a.z,f=i+o+l+h,m=a.w*a.x+a.y*a.z,p=1e-6;if(m>(.5-p)*f)t=2*Math.atan2(a.y,a.w),e=s,n=0;else if((-.5+p)*f>m)t=-2*Math.atan2(a.y,a.w),e=-s,n=0;else{var d=i-o+l-h,v=2*(a.w*a.z-a.x*a.y),y=i-o-l+h,A=2*(a.w*a.y-a.x*a.z);y>0?(t=Math.atan2(v,d),e=Math.asin(2*m/f),n=Math.atan2(A,y)):(t=Math.atan2(-v,-d),e=-Math.asin(2*m/f),e+=0>e?r:-r,n=Math.atan2(-A,-y))}0>t&&(t+=c),t*=u,e*=u,n*=u,this.set(t,e,n)}}(),this.rotateX=function(t){return g.Euler.prototype.rotateByAxisAngle(this,[1,0,0],t),this},this.rotateY=function(t){return g.Euler.prototype.rotateByAxisAngle(this,[0,1,0],t),this},this.rotateZ=function(t){return g.Euler.prototype.rotateByAxisAngle(this,[0,0,1],t),this},this.set(t,e,n)},g.Euler.prototype={constructor:g.Euler,rotateByAxisAngle:function(){var t=new g.RotationMatrix;return function(e,n,a){return t.setFromEuler(e),t=g.RotationMatrix.prototype.rotateByAxisAngle(t,n,a),e.setFromRotationMatrix(t),e}}()},g.DeviceOrientation=function(e){this.options=e||{};var n=0,a=200,i=0,o=10;if(this.alphaOffsetScreen=0,this.alphaOffsetDevice=void 0,"game"===this.options.type){var r=function(e){return null!==e.alpha&&(this.alphaOffsetDevice=new g.Euler(e.alpha,0,0),this.alphaOffsetDevice.rotateZ(-p),++i>=o)?void t.removeEventListener("deviceorientation",r,!1):void(++n>=a&&t.removeEventListener("deviceorientation",r,!1))}.bind(this);t.addEventListener("deviceorientation",r,!1)}else if("world"===this.options.type){var s=function(e){return e.absolute!==!0&&void 0!==e.webkitCompassAccuracy&&null!==e.webkitCompassAccuracy&&+e.webkitCompassAccuracy>=0&&+e.webkitCompassAccuracy<50&&(this.alphaOffsetDevice=new g.Euler(e.webkitCompassHeading,0,0),this.alphaOffsetDevice.rotateZ(p),this.alphaOffsetScreen=p,++i>=o)?void t.removeEventListener("deviceorientation",s,!1):void(++n>=a&&t.removeEventListener("deviceorientation",s,!1))}.bind(this);t.addEventListener("deviceorientation",s,!1)}},g.DeviceOrientation.prototype={constructor:g.DeviceOrientation,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.orientation.callbacks.push(e),f||(m?t.screen.orientation.addEventListener("change",a,!1):t.addEventListener("orientationchange",a,!1)),h.orientation.active||(t.addEventListener("deviceorientation",i,!1),h.orientation.active=!0)},stop:function(){h.orientation.active&&(t.removeEventListener("deviceorientation",i,!1),h.orientation.active=!1)},listen:function(t){this.start(t)},getFixedFrameQuaternion:function(){var t=new g.Euler,e=new g.RotationMatrix,n=new g.Quaternion;return function(){var a=h.orientation.data||{alpha:0,beta:0,gamma:0},i=a.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,i-=t.alpha),t.set(i,a.beta,a.gamma),n.setFromEuler(t),n}}(),getScreenAdjustedQuaternion:function(){var t;return function(){return t=this.getFixedFrameQuaternion(),t.rotateZ(-p),t}}(),getFixedFrameMatrix:function(){var t=new g.Euler,e=new g.RotationMatrix;return function(){var n=h.orientation.data||{alpha:0,beta:0,gamma:0},a=n.alpha;return this.alphaOffsetDevice&&(e.setFromEuler(this.alphaOffsetDevice),e.rotateZ(-this.alphaOffsetScreen),t.setFromRotationMatrix(e),t.alpha<0&&(t.alpha+=360),t.alpha%=360,a-=t.alpha),t.set(a,n.beta,n.gamma),e.setFromEuler(t),e}}(),getScreenAdjustedMatrix:function(){var t;return function(){return t=this.getFixedFrameMatrix(),t.rotateZ(-p),t}}(),getFixedFrameEuler:function(){var t,e=new g.Euler;return function(){return t=this.getFixedFrameMatrix(),e.setFromRotationMatrix(t),e}}(),getScreenAdjustedEuler:function(){var t,e=new g.Euler;return function(){return t=this.getScreenAdjustedMatrix(),e.setFromRotationMatrix(t),e}}(),isAbsolute:function(){return h.orientation.data&&h.orientation.data.absolute===!0?!0:!1},getLastRawEventData:function(){return h.orientation.data||{}},_alphaAvailable:!1,_betaAvailable:!1,_gammaAvailable:!1,isAvailable:function(t){switch(t){case this.ALPHA:return this._alphaAvailable;case this.BETA:return this._betaAvailable;case this.GAMMA:return this._gammaAvailable}},ALPHA:"alpha",BETA:"beta",GAMMA:"gamma"},g.DeviceMotion=function(t){this.options=t||{}},g.DeviceMotion.prototype={constructor:g.DeviceMotion,start:function(e){e&&"[object Function]"==Object.prototype.toString.call(e)&&h.motion.callbacks.push(e),f||(m?t.screen.orientation.addEventListener("change",a,!1):t.addEventListener("orientationchange",a,!1)),h.motion.active||(t.addEventListener("devicemotion",o,!1),h.motion.active=!0)},stop:function(){h.motion.active&&(t.removeEventListener("devicemotion",o,!1),h.motion.active=!1)},listen:function(t){this.start(t)},getScreenAdjustedAcceleration:function(){var t=h.motion.data&&h.motion.data.acceleration?h.motion.data.acceleration:{x:0,y:0,z:0},e={};switch(p){case d:e.x=-t.y,e.y=t.x;break;case v:e.x=-t.x,e.y=-t.y;break;case y:case A:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedAccelerationIncludingGravity:function(){var t=h.motion.data&&h.motion.data.accelerationIncludingGravity?h.motion.data.accelerationIncludingGravity:{x:0,y:0,z:0},e={};switch(p){case d:e.x=-t.y,e.y=t.x;break;case v:e.x=-t.x,e.y=-t.y;break;case y:case A:e.x=t.y,e.y=-t.x;break;default:e.x=t.x,e.y=t.y}return e.z=t.z,e},getScreenAdjustedRotationRate:function(){var t=h.motion.data&&h.motion.data.rotationRate?h.motion.data.rotationRate:{alpha:0,beta:0,gamma:0},e={};switch(p){case d:e.beta=-t.gamma,e.gamma=t.beta;break;case v:e.beta=-t.beta,e.gamma=-t.gamma;break;case y:case A:e.beta=t.gamma,e.gamma=-t.beta;break;default:e.beta=t.beta,e.gamma=t.gamma}return e.alpha=t.alpha,e},getLastRawEventData:function(){return h.motion.data||{}},_accelerationXAvailable:!1,_accelerationYAvailable:!1,_accelerationZAvailable:!1,_accelerationIncludingGravityXAvailable:!1,_accelerationIncludingGravityYAvailable:!1,_accelerationIncludingGravityZAvailable:!1,_rotationRateAlphaAvailable:!1,_rotationRateBetaAvailable:!1,_rotationRateGammaAvailable:!1,isAvailable:function(t){switch(t){case this.ACCELERATION_X:return this._accelerationXAvailable;case this.ACCELERATION_Y:return this._accelerationYAvailable;case this.ACCELERATION_Z:return this._accelerationZAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_X:return this._accelerationIncludingGravityXAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Y:return this._accelerationIncludingGravityYAvailable;case this.ACCELERATION_INCLUDING_GRAVITY_Z:return this._accelerationIncludingGravityZAvailable;case this.ROTATION_RATE_ALPHA:return this._rotationRateAlphaAvailable;case this.ROTATION_RATE_BETA:return this._rotationRateBetaAvailable;case this.ROTATION_RATE_GAMMA:return this._rotationRateGammaAvailable}},ACCELERATION_X:"accelerationX",ACCELERATION_Y:"accelerationY",ACCELERATION_Z:"accelerationZ",ACCELERATION_INCLUDING_GRAVITY_X:"accelerationIncludingGravityX",ACCELERATION_INCLUDING_GRAVITY_Y:"accelerationIncludingGravityY",ACCELERATION_INCLUDING_GRAVITY_Z:"accelerationIncludingGravityZ",ROTATION_RATE_ALPHA:"rotationRateAlpha",ROTATION_RATE_BETA:"rotationRateBeta",ROTATION_RATE_GAMMA:"rotationRateGamma"},t.FULLTILT=g}}(window),!function(t,e){"function"==typeof define&&define.amd?define(function(){return t.GyroNorm=e()}):"object"==typeof module&&module.exports?module.exports=t.GyroNorm=e():t.GyroNorm=e()}(this,function(){function t(t){return Math.round(t*Math.pow(10,g))/Math.pow(10,g)}function e(){var e={};e=_?p.getScreenAdjustedEuler():p.getFixedFrameEuler();var n=d.getScreenAdjustedAcceleration(),i=d.getScreenAdjustedAccelerationIncludingGravity(),o=d.getScreenAdjustedRotationRate(),r=0;A===a?(r=e.alpha-u,r=0>r?360-Math.abs(r):r):r=e.alpha;var s={"do":{alpha:t(r),beta:t(e.beta),gamma:t(e.gamma),absolute:p.isAbsolute()},dm:{x:t(n.x),y:t(n.y),z:t(n.z),gx:t(i.x),gy:t(i.y),gz:t(i.z),alpha:t(o.alpha),beta:t(o.beta),gamma:t(o.gamma)}};return y&&(s.dm.gx*=h,s.dm.gy*=h,s.dm.gz*=h),s}function n(t){b&&("string"==typeof t&&(t={message:t,code:0}),b(t))}var a="game",i="world",o="deviceorientation",r="acceleration",s="accelerationinludinggravity",c="rotationrate",l=null,u=0,h=0,f=!1,m=!1,p=null,d=null,v=50,y=!0,A=a,g=2,b=null,_=!1,x=function(t){};return x.GAME=a,x.WORLD=i,x.DEVICE_ORIENTATION=o,x.ACCELERATION=r,x.ACCELERATION_INCLUDING_GRAVITY=s,x.ROTATION_RATE=c,x.prototype.init=function(t){t&&t.frequency&&(v=t.frequency),t&&t.gravityNormalized&&(y=t.gravityNormalized),t&&t.orientationBase&&(A=t.orientationBase),t&&t.decimalCount&&(g=t.decimalCount),t&&t.logger&&(b=t.logger),t&&t.screenAdjusted&&(_=t.screenAdjusted);var e=new FULLTILT.getDeviceOrientation({type:A}).then(function(t){p=t}),n=(new FULLTILT.getDeviceMotion).then(function(t){d=t,h=d.getScreenAdjustedAccelerationIncludingGravity().z>0?-1:1});return Promise.all([e,n]).then(function(){m=!0})},x.prototype.end=function(){try{m=!1,this.stop(),d.stop(),p.stop()}catch(t){n(t)}},x.prototype.start=function(t){return m?(l=setInterval(function(){t(e())},v),void(f=!0)):void n({message:'GyroNorm is not initialized yet. First call the "init()" function.',code:1})},x.prototype.stop=function(){l&&(clearInterval(l),f=!1)},x.prototype.normalizeGravity=function(t){y=t?!0:!1},x.prototype.setHeadDirection=function(){return _||A===i?!1:(u=p.getFixedFrameEuler().alpha,!0)},x.prototype.startLogging=function(t){t&&(b=t)},x.prototype.stopLogging=function(){b=null},x.prototype.isAvailable=function(t){var e=p.getScreenAdjustedEuler(),n=d.getScreenAdjustedAcceleration(),a=d.getScreenAdjustedAccelerationIncludingGravity(),i=d.getScreenAdjustedRotationRate();switch(t){case o:return e.alpha&&null!==e.alpha&&e.beta&&null!==e.beta&&e.gamma&&null!==e.gamma;case r:return n&&n.x&&n.y&&n.z;case s:return a&&a.x&&a.y&&a.z;case c:return i&&i.alpha&&i.beta&&i.gamma;default:return{deviceOrientationAvailable:e.alpha&&null!==e.alpha&&e.beta&&null!==e.beta&&e.gamma&&null!==e.gamma,accelerationAvailable:n&&n.x&&n.y&&n.z,accelerationIncludingGravityAvailable:a&&a.x&&a.y&&a.z,rotationRateAvailable:i&&i.alpha&&i.beta&&i.gamma}}},x.prototype.isRunning=function(){return f},x});var t=new GyroNorm;t.init().then(function(){t.start(function(t){$(".g-enabled").each(function(){t["do"].alpha>180&&t["do"].beta<45?$(this).css("box-shadow",1*parseInt(t.dm.gy)+"px "+1*parseInt(t.dm.gx)+"px "+$(this).data("shadow-blur")+"px "+$(this).data("shadow-color")):$(this).css("box-shadow",1*parseInt(t.dm.gx)+"px "+1*parseInt(-t.dm.gy)+"px "+$(this).data("shadow-blur")+"px "+$(this).data("shadow-color"))})})})["catch"](function(t){console.log("Device Motion not supported.")})}}();